<template>
  <view class="container">
    <!-- é¡¶éƒ¨æ¸å˜æ ‡é¢˜åŒº -->
    <view class="header-banner">
      <view class="header-bg">
        <view class="bg-circle circle-1"></view>
        <view class="bg-circle circle-2"></view>
        <view class="bg-circle circle-3"></view>
      </view>
      <view class="header-content">
        <view class="title">å…è´¹è¯ä»¶ç…§åˆ¶ä½œ</view>
        <view class="subtitle">è®©æ¯ä¸€å¼ è¯ä»¶ç…§éƒ½å®Œç¾æ— ç‘•</view>
        <view class="header-tags">
          <view class="header-tag">ä¸“ä¸š</view>
          <view class="header-tag">é«˜æ•ˆ</view>
          <view class="header-tag">ä¾¿æ·</view>
        </view>
      </view>
    </view>

    <!-- åŠŸèƒ½å±•ç¤ºå®¹å™¨ -->
    <view class="features-container">
      <view class="section-title-box">
        <view class="section-icon">âœ¨</view>
        <text class="section-title">å¼ºå¤§åŠŸèƒ½</text>
      </view>
      
      <view class="waterfall-wrapper">
        <!-- å·¦åˆ— -->
        <view class="waterfall-column">
          <!-- 1. æ¢èƒŒæ™¯é¢œè‰² -->
          <view class="feature-item" @tap="showFeatureDetail('background')">
            <view class="feature-bg bg-1"></view>
            <view class="feature-content">
              <text class="feature-icon">ğŸ¨</text>
              <text class="feature-title">æ™ºèƒ½æ¢åº•è‰²</text>
              <text class="feature-desc">ä¸€é”®æ›´æ¢è¯ä»¶ç…§èƒŒæ™¯</text>
              <view class="color-dots">
                <view class="dot dot-red"></view>
                <view class="dot dot-blue"></view>
                <view class="dot dot-white"></view>
                <view class="dot dot-gray"></view>
              </view>
            </view>
          </view>

          <!-- 4. æ°´å° -->
          <view class="feature-item" @tap="showFeatureDetail('watermark')">
            <view class="feature-bg bg-4"></view>
            <view class="feature-content">
              <text class="feature-icon">ğŸ”–</text>
              <text class="feature-title">ä¸ªæ€§æ°´å°</text>
              <text class="feature-desc">è‡ªå®šä¹‰æ°´å°æ ‡è¯†</text>
              <view class="watermark-tags">
                <view class="watermark-tag">â†”ï¸ é—´è·</view>
                <view class="watermark-tag">ğŸ“ å¤§å°</view>
              </view>
            </view>
          </view>

          <!-- 5. å…¶ä»– -->
          <view class="feature-item" @tap="showFeatureDetail('other')">
            <view class="feature-bg bg-5"></view>
            <view class="feature-content">
              <text class="feature-icon">âš™ï¸</text>
              <text class="feature-title">å…¶ä»–è®¾ç½®</text>
              <text class="feature-desc">æ›´å¤šä¸“ä¸šè°ƒæ•´é€‰é¡¹</text>
              <view class="other-tags">
                <view class="other-tag">ğŸ“¦ KBå¤§å°</view>
                <view class="other-tag">ğŸ‘¤ é¢éƒ¨æ¯”ä¾‹</view>
              </view>
            </view>
          </view>
        </view>

        <!-- å³åˆ— -->
        <view class="waterfall-column">
          <!-- 2. å°ºå¯¸ -->
          <view class="feature-item" @tap="showFeatureDetail('size')">
            <view class="feature-bg bg-2"></view>
            <view class="feature-content">
              <text class="feature-icon">ğŸ“</text>
              <text class="feature-title">å¤šç§å°ºå¯¸</text>
              <text class="feature-desc">é€‚é…å„ç±»è¯ä»¶éœ€æ±‚</text>
              <view class="size-tags">
                <view class="size-tag">ä¸€å¯¸ 295Ã—413</view>
                <view class="size-tag">äºŒå¯¸ 413Ã—626</view>
                <view class="size-tag">å°ä¸€å¯¸ 260Ã—378</view>
                <view class="size-tag">å¤§ä¸€å¯¸ 390Ã—567</view>
				<view class="size-tag">å°äºŒå¯¸ 413x531</view>
              </view>
            </view>
          </view>

          <!-- 3. ç¾é¢œ -->
          <view class="feature-item" @tap="showFeatureDetail('beauty')">
            <view class="feature-bg bg-3"></view>
            <view class="feature-content">
              <text class="feature-icon">âœ¨</text>
              <text class="feature-title">æ™ºèƒ½ç¾é¢œ</text>
              <text class="feature-desc">å¤šç»´åº¦æ™ºèƒ½ä¼˜åŒ–</text>
              <view class="beauty-tags">
                <view class="beauty-tag">ğŸ’¡ äº®åº¦</view>
                <view class="beauty-tag">ğŸŒ“ å¯¹æ¯”åº¦</view>
                <view class="beauty-tag">ğŸ¨ é¥±å’Œåº¦</view>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬ -->
    <view class="advantage-section">
      <view class="section-title-box">
        <view class="section-icon">ğŸ¯</view>
        <text class="section-title">ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬</text>
      </view>
      
      <view class="advantage-cards">
        <view class="advantage-card card-1">
          <view class="advantage-card-bg"></view>
          <text class="advantage-icon">âš¡</text>
          <text class="advantage-title">æé€Ÿç”Ÿæˆ</text>
          <text class="advantage-text">AIæ™ºèƒ½å¤„ç†\n3ç§’å®Œæˆåˆ¶ä½œ</text>
        </view>

        <view class="advantage-card card-2">
          <view class="advantage-card-bg"></view>
          <text class="advantage-icon">ğŸ¯</text>
          <text class="advantage-title">ç²¾å‡†è¯†åˆ«</text>
          <text class="advantage-text">æ·±åº¦å­¦ä¹ ç®—æ³•\næŠ å›¾æ›´ç²¾ç¡®</text>
        </view>

        <view class="advantage-card card-3">
          <view class="advantage-card-bg"></view>
          <text class="advantage-icon">ğŸ’</text>
          <text class="advantage-title">é«˜æ¸…è¾“å‡º</text>
          <text class="advantage-text">300DPI\næ‰“å°çº§åˆ†è¾¨ç‡</text>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨æ‚¬æµ®æŒ‰é’® -->
    <view class="float-button-area">
      <button class="make-button" @tap="goToMake">
        <view class="button-shine"></view>
        <text class="button-text">å¼€å§‹åˆ¶ä½œè¯ä»¶ç…§</text>
        <text class="button-arrow">â†’</text>
      </button>
    </view>
  </view>
</template>

<script>
import { login } from '@/utils/auth.js';

export default {
  data() {
    return {}
  },
  methods: {
    async goToMake() {
      const token = uni.getStorageSync('token');
      if (!token) {
        try {
          await login();
        } catch (e) {
          return; // Login failed, don't proceed
        }
      }
      uni.switchTab({
        url: '/pages/make/make'
      })
    },
    showFeatureDetail(type) {
      const featureInfo = {
        background: 'æ”¯æŒçº¢ã€è“ã€ç™½ã€ç°ç­‰å¤šç§èƒŒæ™¯è‰²ï¼Œä¸€é”®æ™ºèƒ½æ›´æ¢',
        size: 'åŒ…å«ä¸€å¯¸ã€äºŒå¯¸ã€å°ä¸€å¯¸ã€å¤§ä¸€å¯¸ç­‰å¸¸ç”¨å°ºå¯¸',
        beauty: 'ç¾ç™½ç¾é¢œï¼šæ”¯æŒäº®åº¦ã€å¯¹æ¯”åº¦ã€é¥±å’Œåº¦è°ƒèŠ‚',
        watermark: 'ä¸ªæ€§æ°´å°ï¼šè‡ªå®šä¹‰æ–‡å­—å†…å®¹ã€é—´è·ã€å¤§å°',
        other: 'å…¶ä»–è®¾ç½®ï¼šç²¾ç¡®æ§åˆ¶KBå¤§å°ã€æ™ºèƒ½è°ƒæ•´é¢éƒ¨æ¯”ä¾‹'
      }
      
      uni.showToast({
        title: featureInfo[type] || 'æ•¬è¯·æœŸå¾…',
        icon: 'none',
        duration: 2500
      })
    }
  }
}
</script>

<style lang="scss" scoped>
.container {
  min-height: 100vh;
  background: #f5f7fb;
  padding-bottom: 140rpx;
}

.header-banner {
  position: relative;
  height: 360rpx;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  overflow: hidden;
  padding: 50rpx 40rpx 30rpx;
}

.header-bg {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
}

.bg-circle {
  position: absolute;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
}

.circle-1 {
  width: 300rpx;
  height: 300rpx;
  top: -80rpx;
  right: -80rpx;
  animation: float 6s ease-in-out infinite;
}

.circle-2 {
  width: 200rpx;
  height: 200rpx;
  bottom: -60rpx;
  left: -60rpx;
  animation: float 8s ease-in-out infinite;
}

.circle-3 {
  width: 150rpx;
  height: 150rpx;
  top: 40%;
  left: 30%;
  animation: float 7s ease-in-out infinite;
}

.header-content {
  position: relative;
  z-index: 2;
}

.title {
  font-size: 48rpx;
  font-weight: bold;
  color: #ffffff;
  margin-bottom: 16rpx;
  text-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);
}

.subtitle {
  font-size: 26rpx;
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 32rpx;
  line-height: 1.5;
}

.header-tags {
  display: flex;
  gap: 16rpx;
}

.header-tag {
  padding: 10rpx 20rpx;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10rpx);
  border-radius: 30rpx;
  font-size: 22rpx;
  color: #ffffff;
  border: 1rpx solid rgba(255, 255, 255, 0.3);
}

@keyframes float {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  50% {
    transform: translateY(-20rpx) rotate(10deg);
  }
}

.features-container {
  position: relative;
  margin: -60rpx 30rpx 40rpx;
  padding: 40rpx 32rpx;
  background: #ffffff;
  border-radius: 32rpx;
  box-shadow: 0 12rpx 48rpx rgba(0, 0, 0, 0.08);
}

.section-title-box {
  display: flex;
  align-items: center;
  margin-bottom: 32rpx;
}

.section-icon {
  font-size: 40rpx;
  margin-right: 16rpx;
}

.section-title {
  font-size: 38rpx;
  font-weight: bold;
  color: #1a1a1a;
}

.waterfall-wrapper {
  display: flex;
  gap: 20rpx;
  align-items: flex-start;
}

.waterfall-column {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20rpx;
}

.feature-item {
  position: relative;
  border-radius: 24rpx;
  overflow: hidden;
  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);
  transition: all 0.3s;
}

.feature-item:active {
  transform: scale(0.97);
}

.feature-bg {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0.08;
}

.bg-1 { background: linear-gradient(135deg, #ff6b6b 0%, #ffd89b 100%); }
.bg-2 { background: linear-gradient(135deg, #5e72e4 0%, #a8edea 100%); }
.bg-3 { background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%); }
.bg-4 { background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%); }
.bg-5 { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); }

.feature-content {
  position: relative;
  z-index: 2;
  padding: 28rpx 24rpx;
  background: #ffffff;
  display: flex;
  flex-direction: column;
}

.feature-icon {
  font-size: 44rpx;
  margin-bottom: 12rpx;
}

.feature-title {
  font-size: 28rpx;
  font-weight: bold;
  color: #1a1a1a;
  margin-bottom: 8rpx;
}

.feature-desc {
  font-size: 22rpx;
  color: #666;
  line-height: 1.5;
  margin-bottom: 4rpx;
}

.color-dots {
  display: flex;
  gap: 12rpx;
  margin-top: 12rpx;
}

.dot {
  width: 32rpx;
  height: 32rpx;
  border-radius: 50%;
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.15);
}

.dot-red { background: #ff4444; }
.dot-blue { background: #438cef; }
.dot-white { background: #ffffff; border: 2rpx solid #e0e0e0; }
.dot-gray { background: #9e9e9e; }

.size-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8rpx;
  margin-top: 12rpx;
}

.size-tag {
  padding: 5rpx 12rpx;
  background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
  border-radius: 12rpx;
  font-size: 20rpx;
  color: #667eea;
  border: 1rpx solid #667eea30;
}

.beauty-tags {
  display: flex;
  flex-direction: column;
  gap: 6rpx;
  margin-top: 12rpx;
}

.beauty-tag {
  padding: 6rpx 12rpx;
  background: linear-gradient(135deg, #fbc2eb15 0%, #a6c1ee15 100%);
  border-radius: 12rpx;
  font-size: 20rpx;
  color: #9b59b6;
  border: 1rpx solid #9b59b630;
  display: flex;
  align-items: center;
}

.watermark-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8rpx;
  margin-top: 12rpx;
}

.watermark-tag {
  padding: 6rpx 12rpx;
  background: linear-gradient(135deg, #a1c4fd15 0%, #c2e9fb15 100%);
  border-radius: 12rpx;
  font-size: 20rpx;
  color: #3498db;
  border: 1rpx solid #3498db30;
  display: flex;
  align-items: center;
}

.other-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8rpx;
  margin-top: 12rpx;
}

.other-tag {
  padding: 6rpx 12rpx;
  background: linear-gradient(135deg, #ffecd215 0%, #fcb69f15 100%);
  border-radius: 12rpx;
  font-size: 20rpx;
  color: #e67e22;
  border: 1rpx solid #e67e2230;
  display: flex;
  align-items: center;
}

.advantage-section {
  padding: 0 30rpx 40rpx;
}

.advantage-cards {
  display: flex;
  gap: 20rpx;
  justify-content: space-between;
}

.advantage-card {
  position: relative;
  flex: 1;
  padding: 36rpx 20rpx;
  border-radius: 24rpx;
  background: #ffffff;
  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.08);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.advantage-card-bg {
  position: absolute;
  bottom: -50rpx;
  right: -50rpx;
  width: 150rpx;
  height: 150rpx;
  border-radius: 50%;
  opacity: 0.08;
}

.card-1 .advantage-card-bg {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.card-2 .advantage-card-bg {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.card-3 .advantage-card-bg {
  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
}

.advantage-icon {
  font-size: 56rpx;
  margin-bottom: 16rpx;
  position: relative;
  z-index: 2;
}

.advantage-title {
  font-size: 28rpx;
  font-weight: bold;
  color: #1a1a1a;
  margin-bottom: 12rpx;
  position: relative;
  z-index: 2;
}

.advantage-text {
  font-size: 22rpx;
  color: #666;
  line-height: 1.6;
  position: relative;
  z-index: 2;
  white-space: pre-line;
}

.float-button-area {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 20rpx 30rpx 40rpx;
  background: linear-gradient(to top, rgba(245, 247, 251, 1) 70%, rgba(245, 247, 251, 0));
  z-index: 100;
}

.make-button {
  position: relative;
  width: 100%;
  height: 100rpx;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 12rpx 40rpx rgba(102, 126, 234, 0.4);
  border: none;
  overflow: hidden;
}

.make-button:active {
  transform: scale(0.98);
}

.button-shine {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: shine 3s infinite;
}

.button-text {
  font-size: 34rpx;
  font-weight: bold;
  color: #ffffff;
  margin-right: 12rpx;
  position: relative;
  z-index: 2;
}

.button-arrow {
  font-size: 34rpx;
  color: #ffffff;
  font-weight: bold;
  position: relative;
  z-index: 2;
  animation: arrow-move 1s infinite;
}

@keyframes shine {
  0% {
    transform: translateX(-100%) translateY(-100%);
  }
  100% {
    transform: translateX(100%) translateY(100%);
  }
}

@keyframes arrow-move {
  0%, 100% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(8rpx);
  }
}
</style>
